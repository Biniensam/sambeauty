"use strict";exports.id=854,exports.ids=[854],exports.modules={90725:(e,r,t)=>{t.d(r,{default:()=>m});var a=t(10326);t(17577);var s=t(71806),o=t(74857),l=t(34738),i=t(81109),n=t(77636),c=t(42887),d=t(5932),u=t(90434),g=t(92135);let m=()=>{let{t:e}=(0,g.Z)();return a.jsx("footer",{className:"bg-white dark:bg-gray-900 border-t border-gray-100 dark:border-gray-800 mt-8 sm:mt-12",children:(0,a.jsxs)("div",{className:"container-responsive py-6 sm:py-8 lg:py-12",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 lg:gap-12",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:gap-4",children:[(0,a.jsxs)(u.default,{href:"/",className:"flex items-center space-x-2 min-w-0",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 sm:h-7 sm:w-7 lg:h-8 lg:w-8 text-pink-500 transition-transform duration-300 hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,"aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2C10.343 2 9 3.343 9 5c0 1.657 3 7 3 7s3-5.343 3-7c0-1.657-1.343-3-3-3zM7 21h10a2 2 0 002-2v-1a2 2 0 00-2-2H7a2 2 0 00-2 2v1a2 2 0 002 2z"})}),a.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-serif font-extrabold text-pink-600 truncate select-none bg-gradient-to-r from-pink-600 via-pink-400 to-pink-600 bg-clip-text text-transparent",children:"SamBeauty"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs sm:text-sm max-w-xs",children:e("footerDescription")}),(0,a.jsxs)("div",{className:"flex gap-2 sm:gap-3 mt-2",children:[a.jsx("a",{href:"#","aria-label":"Facebook",className:"text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:a.jsx(s.Z,{size:18,className:"sm:w-5 sm:h-5"})}),a.jsx("a",{href:"#","aria-label":"Twitter",className:"text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:a.jsx(o.Z,{size:18,className:"sm:w-5 sm:h-5"})}),a.jsx("a",{href:"#","aria-label":"Instagram",className:"text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:a.jsx(l.Z,{size:18,className:"sm:w-5 sm:h-5"})}),a.jsx("a",{href:"#","aria-label":"YouTube",className:"text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:a.jsx(i.Z,{size:18,className:"sm:w-5 sm:h-5"})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2 sm:mb-3 text-sm sm:text-base",children:e("footerShopTitle")}),a.jsx(u.default,{href:"/skin-care",className:"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 text-xs sm:text-sm transition-colors",children:e("footerSkinCare")}),a.jsx(u.default,{href:"/makeup",className:"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 text-xs sm:text-sm transition-colors",children:e("footerMakeUp")}),a.jsx(u.default,{href:"/hair",className:"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 text-xs sm:text-sm transition-colors",children:e("footerHair")}),a.jsx(u.default,{href:"/perfume",className:"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 text-xs sm:text-sm transition-colors",children:e("footerFragrance")})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2 sm:mb-3 text-sm sm:text-base",children:e("footerCustomerServiceTitle")}),a.jsx(u.default,{href:"/account",className:"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 text-xs sm:text-sm transition-colors",children:e("footerMyAccount")}),a.jsx(u.default,{href:"/account",className:"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 text-xs sm:text-sm transition-colors",children:e("footerOrderTracking")}),a.jsx(u.default,{href:"/contact",className:"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 text-xs sm:text-sm transition-colors",children:e("footerContactUs")})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:gap-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2 sm:mb-3 text-sm sm:text-base",children:e("footerStayConnectedTitle")}),(0,a.jsxs)("form",{className:"flex flex-col gap-2",onSubmit:e=>{e.preventDefault();let r=e.currentTarget.message.value;r.trim()&&window.open(`https://t.me/sambeauty_support?text=${encodeURIComponent(r)}`,"_blank")},children:[a.jsx("textarea",{name:"message",placeholder:"Send us a message on Telegram...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 resize-none"}),a.jsx("button",{type:"submit",className:"btn-primary px-3 py-2 text-xs sm:text-sm w-full sm:w-auto",children:"Send on Telegram"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-gray-600 dark:text-gray-400 text-xs sm:text-sm",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[a.jsx(n.Z,{size:16,className:"mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"leading-relaxed",children:"Office Number 402, Soliana Commercial Center, Lideta, Addis Ababa Ethiopia"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.Z,{size:14,className:"flex-shrink-0"}),a.jsx("span",{children:"+251970057408"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(d.Z,{size:14,className:"flex-shrink-0"}),a.jsx("span",{children:"support@sambeauty.com"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),a.jsx("a",{href:"https://t.me/sambeauty_support",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 transition-colors",children:"@sambeauty_support"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2 flex-wrap",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/fr/6/6e/CBESA.png",alt:"CBE",className:"h-8 sm:h-9 lg:h-10 object-contain"})}),a.jsx("div",{className:"flex items-center",children:a.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/en/a/a4/Telebirr.png",alt:"Telebirr",className:"h-8 sm:h-9 lg:h-10 object-contain"})})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 sm:mt-8 text-center text-xs sm:text-sm text-gray-500 dark:text-gray-400",children:["\xa9 ",new Date().getFullYear()," ",e("footerCopyright"),". ",e("footerAllRightsReserved")]})]})})}},41160:(e,r,t)=>{t.d(r,{default:()=>k});var a=t(10326),s=t(17577),o=t(88307),l=t(67427),i=t(34565),n=t(94019),c=t(90434),d=t(35047),u=t(81117),g=t(11074),m=t(72607),h=t(60850),p=t(64306),x=t(92135);let f=()=>{let{theme:e,toggleTheme:r}=(0,p.F)(),[t,o]=(0,s.useState)(!1),{t:l}=(0,x.Z)();return(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>{r(),o(!0),setTimeout(()=>o(!1),1200)},className:"inline-flex items-center justify-center w-9 h-9 rounded-full border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-all duration-200 focus:outline-none","aria-label":l("toggleTheme"),tabIndex:0,children:"light"===e?a.jsx(m.Z,{size:18,className:"text-gray-700"}):a.jsx(h.Z,{size:18,className:"text-yellow-400"})}),t&&a.jsx("div",{className:"fixed top-0 left-0 right-0 z-40 bg-gradient-to-r from-primary-500 to-beauty-pink h-1 animate-slideDown",children:a.jsx("div",{className:"h-full bg-white/20 animate-pulse"})})]})};var y=t(64870),b=t(66895);let v=({query:e,isVisible:r,onClose:t,onSelectSuggestion:s})=>{let{suggestions:l,loading:i}=(0,y.fb)(e,5),{t:d}=(0,x.Z)();return r&&e.trim()&&!(e.length<2)?a.jsx("div",{className:"absolute top-full left-0 right-0 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-b-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:i?d("searchingFor"):`${l.length} suggestions`}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:a.jsx(n.Z,{size:16})})]}),i&&a.jsx("div",{className:"space-y-2",children:[void 0,void 0,void 0].map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3 p-2",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-md animate-pulse"}),(0,a.jsxs)("div",{className:"flex-1 space-y-1",children:[a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-2/3"}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-1/3"})]})]},r))}),!i&&0===l.length&&(0,a.jsxs)("div",{className:"text-center py-4",children:[a.jsx(o.Z,{className:"mx-auto h-8 w-8 text-gray-400 mb-2"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:d("noResultsFound")})]}),!i&&l.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[l.map(e=>(console.log("Product image data:",{name:e.name,imageType:typeof e.image,imageLength:e.image?.length,imageStart:e.image?.substring(0,50),isBase64:e.image&&!e.image.startsWith("http")&&!e.image.startsWith("data:")}),(0,a.jsxs)(c.default,{href:`/product/${e._id}`,onClick:()=>s(e.name),className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("img",{src:(0,b.C6)(e.image),alt:e.name,className:"w-12 h-12 object-cover rounded-md",loading:"lazy",onError:e=>{e.target.src="https://images.unsplash.com/photo-1556228720-195a672e8a03?w=48&h=48&fit=crop"}})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:e.name}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.brand}),(0,a.jsxs)("p",{className:"text-xs font-medium text-pink-600 dark:text-pink-400",children:[e.price," Birr"]})]})]},e._id))),a.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)(c.default,{href:`/search?q=${encodeURIComponent(e)}`,onClick:()=>s(e),className:"flex items-center justify-center w-full px-3 py-2 text-sm font-medium text-pink-600 dark:text-pink-400 hover:bg-pink-50 dark:hover:bg-pink-900/20 rounded-md transition-colors",children:[a.jsx(o.Z,{className:"w-4 h-4 mr-2"}),'View all results "',e,'"']})})]})]})}):null};var w=t(99795);let k=()=>{let[e,r]=(0,s.useState)(!1),[t,m]=(0,s.useState)(""),[h,p]=(0,s.useState)(!1),y=(0,s.useRef)(null),b=(0,d.useRouter)(),{state:k}=(0,u.j)(),{state:j}=(0,g.r)(),{t:N}=(0,x.Z)();(0,s.useEffect)(()=>{let e=e=>{y.current&&!y.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let C=e=>{e.preventDefault(),t.trim()&&(r(!1),p(!1),b.push(`/search?q=${encodeURIComponent(t.trim())}`))},P=[N("brands"),N("newTrending"),N("Perfume"),N("skinCare"),N("makeUp"),N("hair")],S={[N("brands")]:"Brands",[N("skinCare")]:"Skin Care",[N("makeUp")]:"Make Up",[N("hair")]:"Hair",[N("Perfume")]:"Perfume",[N("newTrending")]:"New & Trending"},A=e=>{let r=S[e]||e;switch(r){case"Brands":return"/brands";case"Skin Care":return"/skin-care";case"Make Up":return"/makeup";case"Hair":return"/hair";case"Perfume":return"/perfume";case"New & Trending":return"/new-trending";default:return`/category/${r.toLowerCase().replace(/\s+/g,"-")}`}};return a.jsx(a.Fragment,{children:(0,a.jsxs)("header",{className:"bg-white dark:bg-gray-900 shadow-sm sticky top-0 z-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 text-white text-center py-1.5 text-xs sm:text-xs font-medium tracking-wider shadow-sm select-none",children:a.jsx("p",{className:"truncate",children:N("headerBanner")})}),(0,a.jsxs)("div",{className:"container-responsive",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)(c.default,{href:"/",className:"flex items-center space-x-2 min-w-0",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 sm:h-8 sm:w-8 text-pink-500 transition-transform duration-300 hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,"aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2C10.343 2 9 3.343 9 5c0 1.657 3 7 3 7s3-5.343 3-7c0-1.657-1.343-3-3-3zM7 21h10a2 2 0 002-2v-1a2 2 0 00-2-2H7a2 2 0 00-2 2v1a2 2 0 002 2z"})}),a.jsx("h1",{className:"text-lg sm:text-3xl font-serif font-extrabold text-pink-600 truncate select-none bg-gradient-to-r from-pink-600 via-pink-400 to-pink-600 bg-clip-text text-transparent",children:"SamBeauty"})]}),a.jsx("nav",{className:"hidden lg:flex space-x-4 xl:space-x-8",children:P.slice(0,6).map(e=>a.jsx(c.default,{href:A(e),className:"text-gray-700 dark:text-gray-100 hover:text-primary-600 dark:hover:text-primary-400 font-medium transition-colors whitespace-nowrap",children:e},e))}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(f,{}),a.jsx("button",{className:"relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none",onClick:()=>r(!e),"aria-label":e?"Close search":"Open search",children:a.jsx(o.Z,{className:"text-gray-500 dark:text-gray-300",size:22})}),a.jsx(x.W,{}),(0,a.jsxs)(c.default,{href:"/wishlist",className:"hidden lg:block relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none transition-colors",children:[a.jsx(l.Z,{size:20,className:"text-gray-700 dark:text-gray-100",fill:j.items.length>0?"currentColor":"none"}),j.items.length>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:j.items.length})]}),(0,a.jsxs)(c.default,{href:"/cart",className:"hidden md:block p-2 text-gray-700 dark:text-gray-100 hover:text-primary-600 dark:hover:text-primary-400 transition-colors relative",children:[a.jsx(i.Z,{size:20}),k.itemCount>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:k.itemCount})]}),a.jsx(w.Z,{variant:"header"})]})]}),e&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center pt-20 px-4",children:(0,a.jsxs)("div",{ref:y,className:"relative w-full max-w-3xl",children:[(0,a.jsxs)("form",{onSubmit:C,className:"relative",children:[a.jsx(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),a.jsx("input",{type:"text",placeholder:N("searchPlaceholder"),value:t,onChange:e=>{let r=e.target.value;m(r),p(r.length>=2)},onKeyPress:e=>{"Enter"===e.key&&C(e)},className:"w-full pl-10 pr-12 py-3 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",autoFocus:!0}),a.jsx("button",{type:"button",onClick:()=>{r(!1),p(!1)},"aria-label":"Close search",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:a.jsx(n.Z,{size:20})})]}),a.jsx(v,{query:t,isVisible:h,onClose:()=>p(!1),onSelectSuggestion:e=>{m(e),p(!1),r(!1),b.push(`/search?q=${encodeURIComponent(e)}`)}})]})})]})]})})}},99795:(e,r,t)=>{t.d(r,{Z:()=>d});var a=t(10326);t(17577);var s=t(59819),o=t(79635),l=t(71810),i=t(32691),n=t(46887),c=t(90434);function d({variant:e="header"}){let{isSignedIn:r,user:t}=(0,n.aF)(),d=t?.externalAccounts?.some(e=>"google"===e.provider),u=()=>{if(d){let e=t?.externalAccounts?.find(e=>"google"===e.provider),r=e?.imageUrl;if(r)return a.jsx("img",{src:r,alt:"Profile",className:"w-8 h-8 rounded-full object-cover border-2 border-gray-200 dark:border-gray-700"})}return a.jsx(s.Z,{size:20,className:"text-pink-600 dark:text-pink-400"})};return"header"===e?a.jsx("div",{className:"hidden lg:block",children:r?(0,a.jsxs)("div",{className:"relative group",children:[a.jsx("button",{className:"p-2 text-gray-700 dark:text-gray-100 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:u()}),(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[(0,a.jsxs)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t?.firstName||t?.emailAddresses[0]?.emailAddress}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t?.emailAddresses[0]?.emailAddress}),d&&a.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Google Account"})]}),(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsxs)(c.default,{href:"/account",className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",children:[a.jsx(o.Z,{size:16}),"Account"]}),a.jsx(n.AM,{children:(0,a.jsxs)("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",children:[a.jsx(l.Z,{size:16}),"Sign Out"]})})]})]})]}):(0,a.jsxs)("div",{className:"relative group",children:[a.jsx("button",{className:"p-2 text-gray-700 dark:text-gray-100 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:a.jsx(i.Z,{size:20})}),(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[(0,a.jsxs)("div",{className:"p-3 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Welcome Guest"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Sign in or create an account"})]}),(0,a.jsxs)("div",{className:"p-2 space-y-2",children:[a.jsx(n.$d,{mode:"modal",children:(0,a.jsxs)("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",children:[a.jsx(i.Z,{size:16}),"Sign In"]})}),a.jsx(n.gX,{mode:"modal",children:(0,a.jsxs)("button",{className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",children:[a.jsx(o.Z,{size:16}),"Sign Up"]})})]})]})]})}):a.jsx("div",{className:"lg:hidden",children:r?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[u(),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t?.firstName||"Account"})]}):(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx(n.$d,{mode:"modal",children:(0,a.jsxs)("button",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-100 hover:text-pink-600 dark:hover:text-pink-400 transition-colors",children:[a.jsx(i.Z,{size:20}),a.jsx("span",{className:"text-sm font-medium",children:"Sign In"})]})}),a.jsx(n.gX,{mode:"modal",children:(0,a.jsxs)("button",{className:"flex items-center gap-2 text-pink-600 dark:text-pink-400 hover:text-pink-700 dark:hover:text-pink-300 transition-colors",children:[a.jsx(o.Z,{size:20}),a.jsx("span",{className:"text-sm font-medium",children:"Sign Up"})]})})]})})}},64870:(e,r,t)=>{t.d(r,{D3:()=>m,Hn:()=>u,Iy:()=>p,LG:()=>c,MY:()=>y,Nh:()=>g,Nn:()=>v,_w:()=>l,fb:()=>f,gU:()=>d,rn:()=>i,ym:()=>n});var a=t(17577),s=t(62374),o=t(66895);let l=e=>{let[r,t]=(0,a.useState)({}),[s,l]=(0,a.useState)([]);return(0,a.useEffect)(()=>{if(!e){t({}),l([]);return}let r=e.images||[e.image].filter(Boolean),a={};r.forEach((e,t)=>{a[t]={loading:!0,error:!1,loaded:!1,urls:(0,o.zk)(r[t])}}),t(a),(async()=>{try{let e=r.map(e=>(0,o.zk)(e).medium),a=await (0,o.ab)(e);l(a),a.forEach((e,a)=>{a<r.length&&t(e=>({...e,[a]:{...e[a],loading:!1,loaded:!0,error:!1}}))})}catch(e){console.error("Failed to preload images:",e)}})()},[e]),{imageStates:r,preloadedImages:s,validateProductImages:(0,a.useCallback)(async()=>{if(!e)return[];let r=e.images||[e.image].filter(Boolean);return await Promise.all(r.map(async(e,r)=>({index:r,...await (0,o.ap)(e)})))},[e])}},i=(e={})=>{let[r,t]=(0,a.useState)({products:[],loading:!0,error:null}),[o,l]=(0,a.useState)(e),i=(0,a.useCallback)(async()=>{t(e=>({...e,loading:!0,error:null}));try{let e=await s.Ew.getProducts(o);e.success&&e.data?t({products:e.data,loading:!1,error:null,pagination:e.pagination}):t({products:[],loading:!1,error:e.message||"Failed to fetch products"})}catch(e){t({products:[],loading:!1,error:e instanceof Error?e.message:"An error occurred"})}},[o]);(0,a.useEffect)(()=>{i()},[i]);let n=(0,a.useCallback)(()=>i(),[i]);return{...r,refetch:n,setFilters:l}},n=(e=8)=>{let[r,t]=(0,a.useState)({products:[],loading:!0,error:null});return(0,a.useEffect)(()=>{(async()=>{t(e=>({...e,loading:!0,error:null}));try{let r=await s.Ew.getFeaturedProducts(e);r.success&&r.data?t({products:r.data,loading:!1,error:null}):t({products:[],loading:!1,error:r.message||"Failed to fetch featured products"})}catch(e){t({products:[],loading:!1,error:e instanceof Error?e.message:"An error occurred"})}})()},[e]),r},c=(e=8)=>{let[r,t]=(0,a.useState)({products:[],loading:!0,error:null});return(0,a.useEffect)(()=>{(async()=>{t(e=>({...e,loading:!0,error:null}));try{let r=await s.Ew.getNewArrivals(e);r.success&&r.data?t({products:r.data,loading:!1,error:null}):t({products:[],loading:!1,error:r.message||"Failed to fetch new arrivals"})}catch(e){t({products:[],loading:!1,error:e instanceof Error?e.message:"An error occurred"})}})()},[e]),r},d=(e=8)=>{let[r,t]=(0,a.useState)({products:[],loading:!0,error:null});return(0,a.useEffect)(()=>{(async()=>{t(e=>({...e,loading:!0,error:null}));try{let r=await s.Ew.getBestSellers(e);r.success&&r.data?t({products:r.data,loading:!1,error:null}):t({products:[],loading:!1,error:r.message||"Failed to fetch best sellers"})}catch(e){t({products:[],loading:!1,error:e instanceof Error?e.message:"An error occurred"})}})()},[e]),r},u=(e=8)=>{let[r,t]=(0,a.useState)({products:[],loading:!0,error:null});return(0,a.useEffect)(()=>{(async()=>{t(e=>({...e,loading:!0,error:null}));try{let r=await s.Ew.getSaleProducts(e);r.success&&r.data?t({products:r.data,loading:!1,error:null}):t({products:[],loading:!1,error:r.message||"Failed to fetch sale products"})}catch(e){t({products:[],loading:!1,error:e instanceof Error?e.message:"An error occurred"})}})()},[e]),r},g=e=>{let[r,t]=(0,a.useState)({product:null,loading:!0,error:null});return(0,a.useEffect)(()=>{if(!e){t({product:null,loading:!1,error:"Product ID is required"});return}(async()=>{t(e=>({...e,loading:!0,error:null}));try{console.log(`Fetching product with ID: ${e}`);let r=await s.Ew.getProductById(e);r.success&&r.data?(console.log("Product fetched successfully:",r.data),t({product:r.data,loading:!1,error:null})):(console.error("Failed to fetch product:",r.message),t({product:null,loading:!1,error:r.message||"Failed to fetch product"}))}catch(e){console.error("Error in useProductById:",e),t({product:null,loading:!1,error:e instanceof Error?e.message:"An error occurred"})}})()},[e]),r},m=(e,r=4)=>{let[t,o]=(0,a.useState)({products:[],loading:!0,error:null});return(0,a.useEffect)(()=>{if(!e){o({products:[],loading:!1,error:"Product ID is required"});return}(async()=>{o(e=>({...e,loading:!0,error:null}));try{let t=await s.Ew.getProductById(e);if(!t.success||!t.data)throw Error("Failed to fetch current product");let a=t.data,{brand:l,category:i}=a;if(!l||!i){let t=await s.Ew.getRelatedProducts(e,r);t.success&&t.data?o({products:t.data,loading:!1,error:null}):o({products:[],loading:!1,error:t.message||"Failed to fetch related products"});return}let n=await s.Ew.getRelatedProductsByBrandAndCategory(l,i,e,r);if(console.log(`Related products by brand (${l}) and category (${i}):`,n),!n.success||!n.data||0===n.data.length){let e=await h(a,r);if(e.length>0){o({products:e,loading:!1,error:null});return}}n.success&&n.data?o({products:n.data,loading:!1,error:null}):o({products:[],loading:!1,error:n.message||"Failed to fetch related products"})}catch(t){try{let t=await s.Ew.getProductById(e);if(t.success&&t.data){let e=await h(t.data,r);if(e.length>0){o({products:e,loading:!1,error:null});return}}}catch(e){console.error("Local fallback also failed:",e)}o({products:[],loading:!1,error:t instanceof Error?t.message:"An error occurred"})}})()},[e,r]),t},h=async(e,r)=>{try{let t=await s.Ew.getProducts({limit:100});if(!t.success||!t.data)return[];let a=t.data,{brand:o,category:l,_id:i}=e,n=a.filter(e=>e._id!==i&&e.brand===o&&e.category===l);if(n.length<r){let e=a.filter(e=>e._id!==i&&e.brand===o&&!n.some(r=>r._id===e._id));n=[...n,...e]}if(n.length<r){let e=a.filter(e=>e._id!==i&&e.category===l&&!n.some(r=>r._id===e._id));n=[...n,...e]}return n.slice(0,r)}catch(e){return console.error("Error finding local related products:",e),[]}},p=(e,r={})=>{let[t,o]=(0,a.useState)({products:[],loading:!1,error:null}),l=(0,a.useCallback)(()=>r,[JSON.stringify(r)]);return(0,a.useEffect)(()=>{if(!e.trim()){o({products:[],loading:!1,error:null});return}let r=!0,t=async()=>{if(r){console.log("Searching for:",e),o(e=>({...e,loading:!0,error:null}));try{let t=await s.Ew.searchProducts(e,l());if(!r)return;if(t.success&&t.data)console.log("Search results from API:",t.data.length,"products"),o({products:t.data,loading:!1,error:null,pagination:t.pagination});else{console.warn("API search failed, falling back to local search");let t=x(e);r&&(console.log("Local search results:",t.length,"products"),o({products:t,loading:!1,error:null}))}}catch(a){if(!r)return;console.warn("API search error, falling back to local search:",a);let t=x(e);console.log("Local search results after error:",t.length,"products"),o({products:t,loading:!1,error:null})}}},a=setTimeout(()=>{t()},300);return()=>{r=!1,clearTimeout(a)}},[e,l]),t},x=e=>{let{searchProducts:r}=t(33547);return r(e)},f=(e,r=5)=>{let[t,o]=(0,a.useState)([]),[l,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(!e.trim()||e.length<2){o([]);return}let t=!0,a=async()=>{if(t){console.log("Fetching suggestions for:",e),i(!0);try{let a=await s.Ew.searchProducts(e,{limit:r});if(!t)return;if(a.success&&a.data)console.log("Suggestions from API:",a.data.length,"products"),o(a.data);else{let a=x(e).slice(0,r);t&&(console.log("Local suggestions:",a.length,"products"),o(a))}}catch(s){if(!t)return;let a=x(e).slice(0,r);console.log("Local suggestions after error:",a.length,"products"),o(a)}finally{t&&i(!1)}}},l=setTimeout(()=>{a()},200);return()=>{t=!1,clearTimeout(l)}},[e,r]),{suggestions:t,loading:l}},y=(e={})=>{let[r,t]=(0,a.useState)({products:[],loading:!0,error:null}),o=(0,a.useCallback)(()=>e,[JSON.stringify(e)]);return(0,a.useEffect)(()=>{let r=!0;return(async()=>{if(r){console.log("Fetching filtered products with filters:",e),t(e=>({...e,loading:!0,error:null}));try{let a=await s.Ew.getProducts(o());if(!r)return;if(a.success&&a.data)console.log("Filtered products from API:",a.data.length,"products"),t({products:a.data,loading:!1,error:null,pagination:a.pagination});else{console.warn("API filtering failed, falling back to local filtering");let a=b(e);r&&(console.log("Local filtered results:",a.length,"products"),t({products:a,loading:!1,error:null}))}}catch(s){if(!r)return;console.warn("API filtering error, falling back to local filtering:",s);let a=b(e);console.log("Local filtered results after error:",a.length,"products"),t({products:a,loading:!1,error:null})}}})(),()=>{r=!1}},[o]),r},b=e=>{let{allProducts:r}=t(33547),a=[...r];if(e.search){let r=e.search.toLowerCase().trim();a=a.filter(e=>[e.name,e.brand,e.category,e.description,...e.benefits||[],...e.ingredients||[],...e.skinConcern||[],...e.hairConcern||[],e.fragranceFamily,e.concentration,e.season].filter(e=>!!e).map(e=>e.toLowerCase()).some(e=>e.includes(r)))}return e.category&&(a=a.filter(r=>r.category?.toLowerCase()===e.category?.toLowerCase()||r.productType?.toLowerCase()===e.category?.toLowerCase())),e.brand&&(a=a.filter(r=>r.brand.toLowerCase()===e.brand?.toLowerCase())),void 0!==e.minPrice&&(a=a.filter(r=>r.price>=e.minPrice)),void 0!==e.maxPrice&&(a=a.filter(r=>r.price<=e.maxPrice)),void 0!==e.inStock&&(a=a.filter(r=>r.inStock===e.inStock)),e.skinType&&(a=a.filter(r=>(Array.isArray(r.skinType)?r.skinType:[r.skinType]).some(r=>r.toLowerCase()===e.skinType?.toLowerCase()))),e.hairType&&(a=a.filter(r=>(Array.isArray(r.hairType)?r.hairType:[r.hairType]).some(r=>r.toLowerCase()===e.hairType?.toLowerCase()))),void 0!==e.crueltyFree&&(a=a.filter(r=>r.crueltyFree===e.crueltyFree)),void 0!==e.vegan&&(a=a.filter(r=>r.vegan===e.vegan)),void 0!==e.luxury&&(a=a.filter(r=>r.luxury===e.luxury)),void 0!==e.cleanBeauty&&(a=a.filter(r=>r.cleanBeauty===e.cleanBeauty)),a},v=()=>{let[e,r]=(0,a.useState)({brandsByCategory:[],loading:!0,error:null});return(0,a.useEffect)(()=>{(async()=>{r(e=>({...e,loading:!0,error:null}));try{console.log("Fetching products from database to extract brand data...");let[e,t,a,o]=await Promise.all([s.Ew.getFeaturedProducts(100),s.Ew.getNewArrivals(100),s.Ew.getBestSellers(100),s.Ew.getSaleProducts(100)]);console.log("API Responses:",{featured:{success:e.success,count:e.data?.length||0},newArrivals:{success:t.success,count:t.data?.length||0},bestSellers:{success:a.success,count:a.data?.length||0},sale:{success:o.success,count:o.data?.length||0}});let l=[...e.success&&e.data||[],...t.success&&t.data||[],...a.success&&a.data||[],...o.success&&o.data||[]].filter((e,r,t)=>r===t.findIndex(r=>r._id===e._id));if(console.log("Combined products from database:",l.length),l.length>0){console.log("Processing products data to extract brands...");let e=k(l);console.log("Extracted brands data:",e),r({brandsByCategory:e,loading:!1,error:null})}else{console.warn("No products from specific endpoints, trying general products API...");try{let e=await s.Ew.getProducts({limit:200});if(e.success&&e.data&&e.data.length>0){console.log("Fallback products found:",e.data.length);let t=k(e.data);r({brandsByCategory:t,loading:!1,error:null})}else console.warn("No products found in database from any endpoint"),r({brandsByCategory:[],loading:!1,error:"No products available in database"})}catch(e){console.error("Fallback API also failed:",e),r({brandsByCategory:[],loading:!1,error:"No products available in database"})}}}catch(e){console.error("Products API error:",e),r({brandsByCategory:[],loading:!1,error:"Failed to connect to database"})}})()},[]),e},w=e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString(),k=e=>{let r=new Map;return e.forEach(e=>{if(!e._id)return;let t=e.category||e.productType||"Other",a=e.brand;if(!a)return;r.has(t)||r.set(t,new Map);let s=r.get(t);s.has(a)||s.set(a,{name:a,rating:0,followers:"0",isNew:!1,isSale:!1,isTrending:!1,isPopular:!1,productCount:0,totalRating:0,totalReviews:0,image:e.image,totalPrice:0,minPrice:e.price||0,maxPrice:e.price||0,hasDiscount:!1,luxuryBrand:!1,cleanBeauty:!1,crueltyFree:!1,vegan:!1});let o=s.get(a);o.productCount++,o.totalRating+=e.rating||0,o.totalReviews+=e.reviewCount||0,o.totalPrice+=e.price||0,e.price&&(o.minPrice=Math.min(o.minPrice,e.price),o.maxPrice=Math.max(o.maxPrice,e.price)),e.isNew&&(o.isNew=!0),(e.isSale||e.discount)&&(o.isSale=!0),e.isTrending&&(o.isTrending=!0),e.discount&&(o.hasDiscount=!0),e.luxury&&(o.luxuryBrand=!0),e.cleanBeauty&&(o.cleanBeauty=!0),e.crueltyFree&&(o.crueltyFree=!0),e.vegan&&(o.vegan=!0),(o.productCount>=3||e.rating&&e.rating>=4.5)&&(o.isPopular=!0),!o.image&&e.image&&(o.image=e.image)}),Array.from(r.entries()).map(([e,r])=>({category:e,brands:Array.from(r.values()).map(e=>({name:e.name,rating:e.totalReviews>0?Math.round(e.totalRating/e.totalReviews*10)/10:0,followers:w(e.totalReviews),isNew:e.isNew,isSale:e.isSale,isTrending:e.isTrending,isPopular:e.isPopular,productCount:e.productCount,image:e.image,averagePrice:e.productCount>0?Math.round(e.totalPrice/e.productCount):0,priceRange:e.minPrice!==e.maxPrice?`${e.minPrice} - ${e.maxPrice}`:e.minPrice.toString(),hasDiscount:e.hasDiscount,luxuryBrand:e.luxuryBrand,cleanBeauty:e.cleanBeauty,crueltyFree:e.crueltyFree,vegan:e.vegan})).sort((e,r)=>r.rating-e.rating)}))}},62374:(e,r,t)=>{t.d(r,{Ew:()=>s,gk:()=>d});class a{constructor(){this.baseUrl="https://back-cosmo.vercel.app"}async request(e,r={}){let t=`${this.baseUrl}${e}`,a={headers:{"Content-Type":"application/json"},...r};try{console.log(`Making API request to: ${t}`);let e=await fetch(t,a);if(!e.ok)throw console.error(`API request failed with status: ${e.status}`),Error(`HTTP error! status: ${e.status}`);let r=await e.json();return console.log("API request successful:",r),r}catch(e){return console.error("API request failed:",e),{success:!1,message:e instanceof Error?e.message:"Network error occurred",data:void 0}}}async getProducts(e={}){let r=new URLSearchParams;return Object.entries(e).forEach(([e,t])=>{null!=t&&""!==t&&r.append(e,t.toString())}),this.request(`/products?${r.toString()}`)}async getFeaturedProducts(e=8){return this.request(`/products/featured?limit=${e}`)}async getNewArrivals(e=8){return this.request(`/products/new-arrivals?limit=${e}`)}async getBestSellers(e=8){return this.request(`/products/best-sellers?limit=${e}`)}async getSaleProducts(e=8){return this.request(`/products/on-sale?limit=${e}`)}async getProductById(e){console.log(`Fetching product by ID: ${e}`);let r=await this.request(`/products/${e}`);return console.log("Product fetch result:",r),r}async getRelatedProducts(e,r=4){return this.request(`/products/${e}/related?limit=${r}`)}async getRelatedProductsByBrandAndCategory(e,r,t,a=4){let s=new URLSearchParams;return s.append("brand",e),s.append("category",r),s.append("exclude",t),s.append("limit",a.toString()),this.request(`/products/related/brand-category?${s.toString()}`)}async getRelatedProductsByBrand(e,r,t=4){let a=new URLSearchParams;return a.append("brand",e),a.append("exclude",r),a.append("limit",t.toString()),this.request(`/products/related/brand?${a.toString()}`)}async getRelatedProductsByCategory(e,r,t=4){let a=new URLSearchParams;return a.append("category",e),a.append("exclude",r),a.append("limit",t.toString()),this.request(`/products/related/category?${a.toString()}`)}async getCategories(){return this.request("/products/categories")}async getBrands(){return this.request("/products/brands")}async searchProducts(e,r={}){return this.getProducts({...r,search:e})}async submitCheckout(e){try{console.log("Submitting checkout data:",e);let r={...e,paymentMethod:e.paymentMethod||"cash_on_delivery"},t=await this.request("/public/orders",{method:"POST",body:JSON.stringify(r)});if(console.log("Checkout response:",t),t.success&&t.data)return{success:!0,message:t.message,data:t.data};return{success:!1,message:t.message||"Checkout failed",data:void 0}}catch(e){return console.error("Checkout submission error:",e),{success:!1,message:e instanceof Error?e.message:"Failed to submit checkout",data:void 0}}}async getOrdersByContactInfo(e,r,t){try{let a=await this.request("/orders");if(a.success&&a.data){let s=a.data.filter(a=>{let s=a.shippingAddress?.fullName||"",o=a.shippingAddress?.phoneNumber||"",l=a.customerEmail||a.customerInfo?.email||"",i=!1,n=!1,c=!1;if(e&&s){let r=e.toLowerCase().trim(),t=s.toLowerCase().trim();i=r===t||r.includes(t)||t.includes(r)}if(r&&o){let e=r.replace(/\D/g,""),t=o.replace(/\D/g,"");n=e===t||e.endsWith(t)||t.endsWith(e)}return c=t&&l?t.toLowerCase().trim()===l.toLowerCase().trim():!t&&!l,[i,n,c].filter(Boolean).length>=2});console.log(`🔍 Found ${s.length} orders matching user criteria out of ${a.data.length} total orders`);let o=s.map(e=>({_id:e._id,orderNumber:e.orderNumber,date:e.createdAt,items:e.items?.length||0,total:e.totalAmount,status:e.status,products:e.items?.map(e=>({name:e.productSnapshot?.name||e.productName||"Unknown Product",image:e.productSnapshot?.image||e.image||"https://via.placeholder.com/150",quantity:e.quantity,price:e.price}))||[],customerId:e.customerId||"",shippingAddress:{street:e.shippingAddress?.street||"",city:e.shippingAddress?.city||"",region:e.shippingAddress?.region||"",country:e.shippingAddress?.country||"",postalCode:e.shippingAddress?.postalCode||"",fullName:e.shippingAddress?.fullName||"",phoneNumber:e.shippingAddress?.phoneNumber||""},paymentMethod:e.paymentMethod||"unknown"}));return{success:!0,message:`Found ${o.length} orders for you`,data:o}}return{success:!1,message:"No orders found",data:[]}}catch(e){return console.error("Error fetching orders by contact info:",e),{success:!1,message:e instanceof Error?e.message:"Failed to fetch orders",data:[]}}}async getOrdersByEmail(e){try{if(!e)return{success:!1,message:"Email address is required",data:[]};let r=await this.request("/orders");if(r.success&&r.data){let t=r.data.filter(r=>(r.customerEmail||r.customerInfo?.email||"").toLowerCase().trim()===e.toLowerCase().trim());console.log(`🔍 Found ${t.length} orders matching email ${e} out of ${r.data.length} total orders`);let a=t.map(e=>({_id:e._id,orderNumber:e.orderNumber,date:e.createdAt,items:e.items?.length||0,total:e.totalAmount,status:e.status,products:e.items?.map(e=>({name:e.productSnapshot?.name||e.productName||"Unknown Product",image:e.productSnapshot?.image||e.image||"https://via.placeholder.com/150",quantity:e.quantity,price:e.price}))||[],customerId:e.customerId||"",shippingAddress:{street:e.shippingAddress?.street||"",city:e.shippingAddress?.city||"",region:e.shippingAddress?.region||"",country:e.shippingAddress?.country||"",postalCode:e.shippingAddress?.postalCode||"",fullName:e.shippingAddress?.fullName||"",phoneNumber:e.shippingAddress?.phoneNumber||""},paymentMethod:e.paymentMethod||"unknown"}));return{success:!0,message:`Found ${a.length} orders for email ${e}`,data:a}}return{success:!1,message:"No orders found",data:[]}}catch(e){return console.error("Error fetching orders by email:",e),{success:!1,message:e instanceof Error?e.message:"Failed to fetch orders",data:[]}}}}let s=new a,{getProducts:o,getFeaturedProducts:l,getNewArrivals:i,getBestSellers:n,getSaleProducts:c,getProductById:d,getRelatedProducts:u,getRelatedProductsByBrandAndCategory:g,getRelatedProductsByBrand:m,getRelatedProductsByCategory:h,getCategories:p,getBrands:x,searchProducts:f,submitCheckout:y,getOrdersByContactInfo:b,getOrdersByEmail:v}=s},33547:(e,r,t)=>{t.r(r),t.d(r,{allProducts:()=>a,getProductById:()=>o,getProductsByCategory:()=>l,searchProducts:()=>s});let a=[],s=e=>[],o=e=>{},l=e=>[]},66895:(e,r,t)=>{t.d(r,{C6:()=>l,ab:()=>c,ap:()=>g,zk:()=>d});let a=(e,r="image/jpeg")=>{if(!e)return"";if(e.startsWith("data:"))return e;let t=s(e)||r;return`data:${t};base64,${e}`},s=e=>{if(!e||e.length<4)return null;try{let r=atob(e.substring(0,8)),t=new Uint8Array(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);let a=Array.from(t.slice(0,4)).map(e=>e.toString(16).padStart(2,"0")).join("").toUpperCase();if(a.startsWith("89504E47"))return"image/png";if(a.startsWith("FFD8FF"))return"image/jpeg";if(a.startsWith("47494638"))return"image/gif";if(a.startsWith("52494646"))return"image/webp";return null}catch(e){return null}},o=e=>{if(!e||"string"!=typeof e)return!1;let r=e.trim();if(!/^[A-Za-z0-9+/]*={0,2}$/.test(r)||r.length%4!=0)return!1;try{return btoa(atob(r))===r}catch(e){return!1}},l=e=>e?e.startsWith("http://")||e.startsWith("https://")?e:o(e)?(console.log("Converting Base64 image to data URL"),a(e)):e.startsWith("data:")?(console.log("Image is already a data URL"),e):(console.log("Image data type:",typeof e,"Length:",e.length,"Starts with:",e.substring(0,50)),"https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=400&h=400&fit=crop"):"https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=400&h=400&fit=crop",i=(e,r=400,t=400,a=80)=>{if(!e)return l("");if(e.startsWith("data:")||o(e))return e;if(e.includes("unsplash.com")){let s=e.includes("?")?"&":"?";return`${e}${s}w=${r}&h=${t}&fit=crop&q=${a}`}if(e.includes("cloudinary.com")){let s=e.split("/upload/")[0],o=e.split("/upload/")[1];return`${s}/upload/c_fill,w_${r},h_${t},q_${a}/${o}`}return e},n=e=>new Promise((r,t)=>{let a=new Image;a.onload=()=>r(a),a.onerror=()=>t(Error(`Failed to load image: ${e}`)),a.src=e}),c=async e=>Promise.allSettled(e.map(e=>n(e))).then(e=>e.filter(e=>"fulfilled"===e.status).map(e=>e.value)),d=e=>{let r=l(e);return{thumbnail:i(r,100,100,70),small:i(r,300,300,75),medium:i(r,600,600,80),large:i(r,800,800,85),original:r}},u=e=>new Promise(r=>{if(!e){r(!1);return}let t=new Image;t.onload=()=>r(!0),t.onerror=()=>r(!1);try{let r=a(e);t.src=r}catch(e){r(!1)}}),g=async e=>{if(!e)return{valid:!1,error:"No image data provided"};try{if(e.startsWith("http")){let r=await fetch(e,{method:"HEAD"});if(!r.ok)return{valid:!1,error:`Image URL returned status ${r.status}`};let t=r.headers.get("content-type");if(!t?.startsWith("image/"))return{valid:!1,error:"URL does not point to an image"};return{valid:!0}}if(o(e)){let r=await u(e);return{valid:r,error:r?void 0:"Invalid Base64 image data"}}if(e.startsWith("data:")){let r=await u(e.split(",")[1]||"");return{valid:r,error:r?void 0:"Invalid data URL"}}return{valid:!1,error:"Unsupported image format"}}catch(e){return{valid:!1,error:e instanceof Error?e.message:"Unknown error"}}}}};