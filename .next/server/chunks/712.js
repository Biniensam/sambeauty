"use strict";exports.id=712,exports.ids=[712],exports.modules={47712:(e,t,n)=>{let s,i;n.r(t),n.d(t,{createOrReadKeyless:()=>et,removeKeyless:()=>en,safeParseClerkFile:()=>F});var r,a,l,o,c,d,u,h,p,f,g,y,m,k,v,w,b,K,x,E,C=n(88106);n(9773),n(43005),n(1996);var S=n(14430),M=n(7148),U=n(47877),T=class{constructor(){(0,U.Ko)(this,o),(0,U.Ko)(this,a,"clerk_telemetry_throttler"),(0,U.Ko)(this,l,864e5)}isEventThrottled(e){if(!(0,U.ac)(this,o,u))return!1;let t=Date.now(),n=(0,U.U9)(this,o,c).call(this,e),s=U.ac(this,o,d)?.[n];if(!s){let e={...(0,U.ac)(this,o,d),[n]:t};localStorage.setItem((0,U.ac)(this,a),JSON.stringify(e))}if(s&&t-s>(0,U.ac)(this,l)){let e=(0,U.ac)(this,o,d);delete e[n],localStorage.setItem((0,U.ac)(this,a),JSON.stringify(e))}return!!s}};a=new WeakMap,l=new WeakMap,o=new WeakSet,c=function(e){let{sk:t,pk:n,payload:s,...i}=e,r={...s,...i};return JSON.stringify(Object.keys({...s,...i}).sort().map(e=>r[e]))},d=function(){let e=localStorage.getItem((0,U.ac)(this,a));return e?JSON.parse(e):{}},u=function(){if("undefined"==typeof window)return!1;let e=window.localStorage;if(!e)return!1;try{let t="test";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e.length>0&&e.removeItem((0,U.ac)(this,a)),!1}};var A={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},O=class{constructor(e){(0,U.Ko)(this,m),(0,U.Ko)(this,h),(0,U.Ko)(this,p),(0,U.Ko)(this,f,{}),(0,U.Ko)(this,g,[]),(0,U.Ko)(this,y),(0,U.qx)(this,h,{maxBufferSize:e.maxBufferSize??A.maxBufferSize,samplingRate:e.samplingRate??A.samplingRate,perEventSampling:e.perEventSampling??!0,disabled:e.disabled??!1,debug:e.debug??!1,endpoint:A.endpoint}),e.clerkVersion||"undefined"!=typeof window?(0,U.ac)(this,f).clerkVersion=e.clerkVersion??"":(0,U.ac)(this,f).clerkVersion="",(0,U.ac)(this,f).sdk=e.sdk,(0,U.ac)(this,f).sdkVersion=e.sdkVersion,(0,U.ac)(this,f).publishableKey=e.publishableKey??"";let t=(0,M.nQ)(e.publishableKey);t&&((0,U.ac)(this,f).instanceType=t.instanceType),e.secretKey&&((0,U.ac)(this,f).secretKey=e.secretKey.substring(0,16)),(0,U.qx)(this,p,new T)}get isEnabled(){return!("development"!==(0,U.ac)(this,f).instanceType||(0,U.ac)(this,h).disabled||"undefined"!=typeof process&&process.env&&(0,S.fQ)(process.env.CLERK_TELEMETRY_DISABLED)||"undefined"!=typeof window&&window?.navigator?.webdriver)}get isDebug(){return(0,U.ac)(this,h).debug||"undefined"!=typeof process&&process.env&&(0,S.fQ)(process.env.CLERK_TELEMETRY_DEBUG)}record(e){let t=(0,U.U9)(this,m,E).call(this,e.event,e.payload);(0,U.U9)(this,m,K).call(this,t.event,t),(0,U.U9)(this,m,k).call(this,t,e.eventSamplingRate)&&((0,U.ac)(this,g).push(t),(0,U.U9)(this,m,w).call(this))}};h=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,y=new WeakMap,m=new WeakSet,k=function(e,t){return this.isEnabled&&!this.isDebug&&(0,U.U9)(this,m,v).call(this,e,t)},v=function(e,t){let n=Math.random();return n<=(0,U.ac)(this,h).samplingRate&&(!1===(0,U.ac)(this,h).perEventSampling||void 0===t||n<=t)&&!(0,U.ac)(this,p).isEventThrottled(e)},w=function(){if("undefined"==typeof window){(0,U.U9)(this,m,b).call(this);return}if((0,U.ac)(this,g).length>=(0,U.ac)(this,h).maxBufferSize){(0,U.ac)(this,y)&&("undefined"!=typeof cancelIdleCallback?cancelIdleCallback:clearTimeout)((0,U.ac)(this,y)),(0,U.U9)(this,m,b).call(this);return}(0,U.ac)(this,y)||("requestIdleCallback"in window?(0,U.qx)(this,y,requestIdleCallback(()=>{(0,U.U9)(this,m,b).call(this)})):(0,U.qx)(this,y,setTimeout(()=>{(0,U.U9)(this,m,b).call(this)},0)))},b=function(){let e=[...(0,U.ac)(this,g)];(0,U.qx)(this,g,[]),(0,U.qx)(this,y,null),0!==e.length&&fetch(new URL("/v1/event",(0,U.ac)(this,h).endpoint),{method:"POST",body:JSON.stringify({events:e}),keepalive:!0,headers:{"Content-Type":"application/json"}}).catch(()=>void 0)},K=function(e,t){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",e),console.log(t),console.groupEnd()):console.log("[clerk/telemetry]",e,t))},x=function(){let e={name:(0,U.ac)(this,f).sdk,version:(0,U.ac)(this,f).sdkVersion};if("undefined"!=typeof window){let t=window;if(t.Clerk){let n=t.Clerk;if("object"==typeof n&&null!==n&&"constructor"in n&&"function"==typeof n.constructor&&n.constructor.sdkMetadata){let{name:t,version:s}=n.constructor.sdkMetadata;void 0!==t&&(e.name=t),void 0!==s&&(e.version=s)}}}return e},E=function(e,t){let n=(0,U.U9)(this,m,x).call(this);return{event:e,cv:(0,U.ac)(this,f).clerkVersion??"",it:(0,U.ac)(this,f).instanceType??"",sdk:n.name,sdkv:n.version,...(0,U.ac)(this,f).publishableKey?{pk:(0,U.ac)(this,f).publishableKey}:{},...(0,U.ac)(this,f).secretKey?{sk:(0,U.ac)(this,f).secretKey}:{},payload:t}},r=C.WX,async(...e)=>{let{data:t,errors:n}=await r(...e);if(n)throw n[0];return t};var R=n(70459);let V={secretKey:R.Cn,publishableKey:R.Am,apiUrl:R.T5,apiVersion:R.Gn,userAgent:"@clerk/nextjs@6.30.1",proxyUrl:R.NM,domain:R.yK,isSatellite:R.lo,machineSecretKey:R.v$,sdkMetadata:R.nE,telemetry:{disabled:R.CY,debug:R.w4}},_=e=>(function(e){let t={...e},n=(0,C.gf)(t),s=(0,C.sA)({options:t,apiClient:n}),i=new O({...e.telemetry,publishableKey:t.publishableKey,secretKey:t.secretKey,samplingRate:.1,...t.sdkMetadata?{sdk:t.sdkMetadata.name,sdkVersion:t.sdkMetadata.version}:{}});return{...n,...s,telemetry:i}})({...V,...e});var N=Object.getOwnPropertyNames;let D=(s={"src/runtime/node/safe-node-apis.js"(e,t){let{existsSync:s,writeFileSync:i,readFileSync:r,appendFileSync:a,mkdirSync:l,rmSync:o}=n(87561),c=n(49411);t.exports={fs:{existsSync:s,writeFileSync:i,readFileSync:r,appendFileSync:a,mkdirSync:l,rmSync:o},path:c,cwd:()=>process.cwd()}}},function(){return i||(0,s[N(s)[0]])((i={exports:{}}).exports,i),i.exports})(),I=e=>{throw Error(`Clerk: ${e} is missing. This is an internal error. Please contact Clerk's support.`)},j=()=>(D.fs||I("fs"),D.fs),W=()=>(D.path||I("path"),D.path),q=()=>(D.cwd||I("cwd"),D.cwd);var B=n(71615);async function J(){var e;let t=await (0,B.headers)();return{nodeVersion:process.version,nextVersion:function(){var e;try{return null!=(e=process.title)?e:"unknown-process-title"}catch{return}}(),npmConfigUserAgent:process.env.npm_config_user_agent,userAgent:null!=(e=t.get("User-Agent"))?e:void 0}}function L(e){let t=new Headers;return e.nodeVersion&&t.set("Clerk-Node-Version",e.nodeVersion),e.nextVersion&&t.set("Clerk-Next-Version",e.nextVersion),e.npmConfigUserAgent&&t.set("Clerk-NPM-Config-User-Agent",e.npmConfigUserAgent),e.userAgent&&t.set("Clerk-Client-User-Agent",e.userAgent),t}let P=".clerk",z="clerk.lock",Q=(...e)=>{let t=W(),n=q();return t.join(n(),P,...e)},H=".tmp",Y=()=>Q(H,"keyless.json"),$=()=>Q(H,"README.md"),G=!1;function F(){let{readFileSync:e}=j();try{let t;let n=Y();try{t=e(n,{encoding:"utf-8"})||"{}"}catch{t="{}"}return JSON.parse(t)}catch{return}}let X=()=>{let{writeFileSync:e}=j();G=!0,e(z,"This file can be deleted. Please delete this file and refresh your application",{encoding:"utf8",mode:"0777",flag:"w"})},Z=()=>{let{rmSync:e}=j();try{e(z,{force:!0,recursive:!0})}catch{}G=!1},ee=()=>{let{existsSync:e}=j();return G||e(z)};async function et(){let{writeFileSync:e,mkdirSync:t}=j();if(ee())return null;X();let n=Y(),s=$();t(Q(H),{recursive:!0}),function(){let{existsSync:e,writeFileSync:t,readFileSync:n,appendFileSync:s}=j(),i=W(),r=q(),a=i.join(r(),".gitignore");e(a)||t(a,""),n(a,"utf-8").includes(P+"/")||s(a,`
# clerk configuration (can include secrets)
/${P}/
`)}();let i=F();if((null==i?void 0:i.publishableKey)&&(null==i?void 0:i.secretKey))return Z(),i;let r=_({}),a=await J().then(L).catch(()=>new Headers),l=await r.__experimental_accountlessApplications.createAccountlessApplication({requestHeaders:a}).catch(()=>null);return l&&(e(n,JSON.stringify(l),{encoding:"utf8",mode:"0777",flag:"w"}),e(s,`
## DO NOT COMMIT
This directory is auto-generated from \`@clerk/nextjs\` because you are running in Keyless mode. Avoid committing the \`.clerk/\` directory as it includes the secret key of the unclaimed instance.
  `,{encoding:"utf8",mode:"0777",flag:"w"})),Z(),l}function en(){let{rmSync:e}=j();if(!ee()){X();try{e(Q(),{force:!0,recursive:!0})}catch{}Z()}}}};